<!DOCTYPE html>
<html lang="en" xmlns:temporal="http://www.thymeleaf.org/extras/temporal">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>HealthBooking Bác Sĩ</title>
    <link rel="shortcut icon" href="/image/Logo.png" type="image/x-icon">
    <link rel="stylesheet" th:href="@{/bootstrap-5.3.2-dist/css/bootstrap.min.css}"/>
    <link rel="stylesheet" href="../style.css">
    <script src="/bootstrap-5.3.2-dist/js/bootstrap.bundle.js"></script>
  </head>
  <body>
	  
	   <div  style="background-color: #003399;">
        <header th:insert="~{/layout/bac-si/header.html::headerFragment}"></header>
 </div>
    <div class="container main">
        

      <main>
     

        <h3> Lịch khám của bạn</h3>

        <br>
        
        
         <div class="container pt-5">
		
        <div th:if="${not #lists.isEmpty(lichHens)}">
            <div th:each="lichHen : ${lichHens}" class="card mb-3">
                <div class="row g-0">
                    <div class="col-md-4 p-5" >
                        <img th:src="@{/img/{image}(image=${lichHen.maBenhNhan.hinhAnh})}" class="img-fluid rounded-start my-3 mx-5" alt="..."style="height: 280px;">
                    </div>
                    <div class="col-md-8">
                        <div class="card-body">
                            <div class="row mb-3">
                                <div class="col">
                                    <h5 class="card-title py-2">
                                        <strong>Bệnh nhân:</strong>
                                        <span th:text="${lichHen.maBenhNhan != null ? lichHen.maBenhNhan.hoVaTen : ''}"></span>
                                    </h5>
                                    
                                    
                                      <p class="card-text">
                                <strong>Thời gian:</strong>
                                <span th:if="${lichHen.maLichTrinh != null}">
                                <span th:text="${lichHen.maLichTrinh.thoigianbatdau + '-' + lichHen.maLichTrinh.thoigianketthuc}"></span>
                                <i th:text="${lichHen.maLichTrinh.ngayLamViec}"></i>
                            </span>
                            </p>
                                
                              <p class="card-text">
                                <strong>Năm sinh:</strong>
                                <span th:text="${lichHen.maBenhNhan.tuoi}">
                            </span>
                            </p>
                            
                            <p class="card-text">
                                <strong>Số điện thoại:</strong>
                                <span th:text="${lichHen.maBenhNhan.soDienThoai}">
                            </span>
                            </p>

                                 <p class="card-text">
                                <strong>Hình thức thanh toán:</strong>
                                <span th:text="${lichHen.maLichTrinh != null ? lichHen.thanhtoan : ''}"></span>
                            </p>
                            
                            
                               <p class="card-text">
                                <strong>Mô tả triệu chứng:</strong>
                                <span th:text="${lichHen.mieuta}"></span>
                            </p>
                            
                            

                                    
                                    
                                </div>
                                <div class="col">
				  <p class="card-text">
                  <strong>Trạng thái lịch hẹn:</strong>

                  <form th:with="lichHenId=${lichHen.maLichHen}" th:action="@{/HealthBooking/admin/bac-si/__${lichHenId}__}" th:method="get">


                <select class="form-select w-50 fw-bold" name="TrangThai" onchange="this.form.submit()">
                <option th:each="TrangThai : ${lichHen.TrangThai}" 
                  th:value="${TrangThai}" 
                  th:text="${TrangThai}"
                  th:disabled="${TrangThai == 'Đã hủy' }"
                 ></option>

    <option value="Đã hủy">Đã hủy</option>
    <option value="Không Đến">Không Đến</option>
    <option value="Đã xác nhận">Đã xác nhận</option>
    
</select>

  <!-- Trường nhập lí do hủy -->
    <div th:if="${lichHen.TrangThai == 'Đã hủy'}" >
        <label for="reason" class="form-label">Lí do hủy:</label>

    <textarea id="lidohuy" name="lidohuy" class="form-control w-50" rows="3" cols="50" th:text="${lichHen.lidohuy}"></textarea>


    <button type="submit" class="btn btn-warning mt-3" style="width: 200px;">Gửi</button>

    </div>


       </form>
         </p>
									
		</div>
                                
                               


                        </div>
                    </div>
                </div>
            </div>
        </div>
     
        
   
        
      </main>

      
   
      
    </div>
  </body>
</html>
